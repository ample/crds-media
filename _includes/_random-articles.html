{% assign min = 0 %}
{% assign max = site.posts.size | minus: 1 %}
{% assign diff = max | minus: min %}
{% assign current_page = page.index %}

{% capture random_posts %}
  {% for i in (1..4) %}
    {% assign random = "now" | date: "%N" | modulo: diff | plus: min %}
    {% if random != current_page %}
      {{ random }}
    {% endif %}
  {% endfor %}
{% endcapture %}

{% capture unique %}
  {{ random_posts | split: ' ' | uniq | join: ' ' }}
{% endcapture %}

<!-- Make an array -->
{% assign array = unique | split: " " %}

<div class="container">
  {{ current_page }}
  {{ array }}
  <h2 class="collection-header push-bottom">more articles</h2>
  <div data-card-deck class="card-deck card-deck--expanded-layout card-deck--wrap">
    {% for num in array %}
    {% assign number = num | plus: 0 %}
    {% assign post = site.posts[number] %}
    {% assign author = site.authors | where:"name", post.author | first %}
      <div class="card card--layered">
        <a href="{{ post.url }}">
          <div class="card-bgImage sixteen-nine" style="background-image: url('{{ post.featured_image }}');"></div>
          <div class="card-block">
            <h4 class="card-title font-family-condensed-extra text-uppercase">{{ post.title }}</h4>
            <p class="card-text">
              <a href="{{ author.permalink }}">{{ post.author }}</a> |
              <span class="card-date">
                {{ post.date | date: date_format }}
              </span>
            </p>
          </div>
        </a>
      </div>
    {% endfor %}
  </div>
</div>
