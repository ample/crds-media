<div class="embed-responsive embed-responsive-16by9">
  <iframe id="js-media-video"
          width="560"
          height="315"
          src="https://www.youtube.com/embed/{{ video_id }}?enablejsapi=1&rel=0"
          frameborder="0"
          allow="autoplay; encrypted-media"
          allowfullscreen></iframe>
</div>

<script type="text/javascript">
  var tag = document.createElement('script');
  tag.id = 'media-youtube-video-handlers';
  tag.src = 'https://www.youtube.com/iframe_api';
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('js-media-video', {
      events: {
        'onStateChange': onPlayerStateChange
      }
    });
  }

  function onPlayerStateChange(event) {
    var title = player.getVideoData().title
    , videoId = player.getVideoData().video_id
    , source = window.location.href
    , videoTotalDuration = player.getDuration()
    , currentTime = player.getCurrentTime()
    , reasonForEnding;

    if (event.data == YT.PlayerState.ENDED) {
      reasonForEnding = 'Ended';

      console.log(`Video ${title} (ID # ${videoId}) is ${videoTotalDuration} seconds long and located at ${source}. ${reasonForEnding} at ${currentTime} seconds.`);
    } else if (event.data == YT.PlayerState.PAUSED) {
      reasonForEnding = 'Paused';

      console.log(`Video ${title} (ID # ${videoId}) is ${videoTotalDuration} seconds long and located at ${source}. ${reasonForEnding} at ${currentTime} seconds.`);
    } else if (event.data == YT.PlayerState.PLAYING) {
      console.log(`Video ${title} (ID # ${videoId}) is ${videoTotalDuration} seconds long and located at ${source}.`);
    }
  }
</script>